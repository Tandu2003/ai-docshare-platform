#!/bin/bash

# ===========================================
# Build Script - Build Frontend & Backend
# Then restart PM2 processes
# ===========================================

set -e

echo ""
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "โ        ๐จ Building DocShare Platform                      โ"
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo ""

# ====== BUILD FRONTEND ======
echo "๐ฆ [1/3] Building Frontend..."
cd frontend
npm install
npm run build
cd ..
echo "โ Frontend built successfully"
echo ""

# ====== BUILD BACKEND ======
echo "๐ฆ [2/3] Building Backend..."
cd backend
npm install
npm run build
cd ..
echo "โ Backend built successfully"
echo ""

# ====== RESTART PM2 ======
echo "๐ [3/3] Restarting PM2 processes..."
pm2 restart all

echo ""
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo "โ              โ BUILD & RESTART HOรN TแบคT!                 โ"
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโฃ"
echo "โ                                                           โ"
echo "โ  ๐ Xem trแบกng thรกi: pm2 status                            โ"
echo "โ  ๐ Xem logs:       pm2 logs                              โ"
echo "โ                                                           โ"
echo "โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ"
echo ""

